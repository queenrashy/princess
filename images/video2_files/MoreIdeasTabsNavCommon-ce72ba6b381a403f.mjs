"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[12260],{107106:(e,t,r)=>{r.r(t),r.d(t,{default:()=>R});var n=r(667294),a=r(616550),l=r(883119),o=r(415761),i=r(19963),d=r(182997),s=r(909512),u=r(233846),c=r(94970),f=r(344500),h=r(241544),p=r(775232),_=r(635943),b=r(785893);function m(e){let{preload:t}=(0,_.G)(),{tabs:r,onChange:n,...o}=e,i=r.map(e=>{switch(e.kind){case"Entrypoint":return{href:(0,a.Gn)(e.route.kind,e.route.routeParams),...e.tab,_onMouseEnter:r=>{let n=e.preloadExtent??"Both";"None"!==n&&t(e.route,n),e.tab._onMouseEnter?.(r)}};case"Legacy":return e.tab;default:return(0,p.Z)(e)}});return(0,b.jsx)(l.mQ,{onChange:e=>{let a=r[e.activeTabIndex];a?.kind==="Entrypoint"&&t(a.route,"Both"),n?.(e)},tabs:i,...o})}let x=new l.Ry(6),g=new l.Ry(1),y={__style:{background:"linear-gradient(#B237A5, #2277B9)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"}};function k({boards:e,currentTabId:t,currentTabIndex:r,headerShadowContext:a,hideTabs:p,inLocalNavigation:_,isPartner:k,isTodayTabEnabled:w,nonFixed:v}){let S=(0,u.ZP)(),{logContextEvent:E}=(0,i.v)(),I=(0,n.useRef)(null),P=(0,n.useRef)(null),C=(0,n.useRef)(null),[A,R]=(0,n.useState)(0),[L,j]=(0,n.useState)(!1),[N,T]=(0,n.useState)(!1),[B,z]=(0,n.useState)(0),[D,O]=(0,n.useState)(0),F=(e,t)=>(0,b.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{background:`linear-gradient(to ${"back"===e?"right":"left"}, #FFFFFF 51.56%, rgba(255, 255, 255, 0) 100%`,padding:"back"===e?"8px 32px 8px 0":"8px 0 8px 32px"}},left:"back"===e,position:"absolute",right:"forward"===e,children:(0,b.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px 0px rgba(0, 0, 0, 0.1)"}},rounding:"circle",children:(0,b.jsx)(l.hU,{accessibilityLabel:"back"===e?S._('Previous tabs', 'localNav.tab.backArrow', 'accessibility label for local navigation back arrow'):S._('Next tabs', 'localNav.tab.fwdArrow', 'accessibility label for local navigation forward arrow'),bgColor:"white",icon:"back"===e?"arrow-back":"arrow-forward",onClick:t,size:"sm"})})}),M=({activeTabIndex:t,currentTab:r})=>{if(!k&&_&&e?.[t-1]?.tab_type==="pinterest_picks")return 14584;switch(r){case"homefeed":return 11081;case"today":return 11674;default:return 11082}},Z=(t=>{let n=[{kind:"Legacy",tab:{href:"/homefeed/",id:"homefeed",text:k&&!_?S._('For you', 'authHomefeed.moreIdeasNav.homefeed', 'Homefeed tab shown when user is a partner'):S._('All', 'authHomefeed.moreIdeasNav.homefeed', 'Homefeed tab shown when user is not a partner ')}}];if(k&&!_)return w?[...n,{kind:"Entrypoint",route:{kind:"/today/",routeParams:{}},tab:{id:"today",text:S._('Explore', 'authHomefeed.moreIdeasNav.explore', 'Explore tab shown when user is a partner')},preloadExtent:t}]:n;if(e&&_){let t=e.findIndex(e=>"board_more_ideas"===e.tab_type),a=e.findIndex(e=>"pinterest_picks"===e.tab_type);return[...n,...e.map((e,n)=>({kind:"Legacy",tab:{href:"pinterest_picks"===e.tab_type?"/?holidayFinds=true":`/?boardId=${e.id}`,id:String(e.id),text:"pinterest_picks"===e.tab_type&&r!==a+1?(0,b.jsx)(l.xu,{dangerouslySetInlineStyle:y,children:"Holiday finds"}):e.name,ref:n===t?P:void 0}}))]}return n})((0,h._)().preloadExtent),H=(0,n.useCallback)((e,t)=>{j(e>0),T(e<t)},[]),U=(0,n.useCallback)(e=>{let t=C.current;if(t&&null!=r){let n=t.children[0]?.children[0]?.children[r];if(n){let r=t.clientWidth,a=n.offsetLeft-(r-n.offsetWidth)/2;O(a=Math.max(0,Math.min(a,e))),H(a,e)}}},[r,H]),W=(0,n.useCallback)(()=>{let e=Math.min(D+(A-90),B);O(e),H(e,B)},[D,A,B,H]),Y=(0,n.useCallback)(()=>{let e=Math.max(D-(A-90),0);O(e),H(e,B)},[D,A,B,H]);(0,n.useEffect)(()=>(a.setSubheaderShadow("moreIdeas"),I.current&&c.Z.addObstruction("top",I.current),()=>{a.setSubheaderShadow(null)}),[a]),(0,n.useEffect)(()=>{let e=(0,d.Z)(()=>{let e=C.current;if(e){let t=e.children[0]?.scrollWidth||0,r=e.clientWidth,n=Math.max(0,t-r);R(r),z(n),O(Math.min(D,n)),U(n)}},200);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[D,U]),(0,n.useEffect)(()=>{let e=C.current;if(e){let t=e.children[0]?.scrollWidth||0,r=e.clientWidth,n=Math.max(0,t-r);R(r),z(n),O(Math.min(0,n)),U(n)}},[U]);let G=_?r:Z.findIndex(e=>e.tab.id===t),V=G?Z[G]:void 0;return(0,b.jsx)(l.xu,{ref:I,children:(0,b.jsx)(l.xu,{color:"default",dangerouslySetInlineStyle:{__style:{transform:p?"translateY(-100%)":"translateY(0)",transition:"all 0.3s ease-in-out",...a.isScrolled&&!_?f.Rz:{}}},position:v?"static":"fixed",width:"100%",zIndex:x,children:(0,b.jsxs)(l.xu,{ref:C,alignItems:"stretch",dangerouslySetInlineStyle:{__style:{overflowX:"clip"}},display:"flex",justifyContent:!k&&_?"start":"center",width:"100%",children:[(0,b.jsxs)(l.xu,{color:"default",dangerouslySetInlineStyle:{__style:{left:`-${D}px`,transition:"left 0.3s, right 0.3s"}},display:"flex",height:o.Z,justifyContent:!k&&_?"start":"center",paddingY:0,position:"relative",children:[(0,b.jsx)(m,{activeTabIndex:null!=G&&V?G:0,onChange:({activeTabIndex:e,event:t})=>{t.preventDefault();let r=Z[e];r&&E({aux_data:{index:e.toString()},component:13184,element:M({activeTabIndex:e,currentTab:r.tab.id}),event_type:101,view_parameter:3173,view_type:1})},tabs:Z}),!k&&_&&P?.current&&(0,b.jsx)(s.Qp,{anchor:P?.current,experienceIds:[506684],forceDirection:!0,idealDirection:"down",placementId:11,showCaret:!0,textWeight:"normal",zIndex:f.NW})]}),_&&!k&&(0,b.jsxs)(l.xu,{alignItems:"center",display:"flex",justifyContent:"between",zIndex:g,children:[L&&F("back",Y),N&&F("forward",W)]})]})})})}var w=r(363402),v=r(725e3),S=r(857147),E=r(882368),I=r(94053),P=r(381262),C=r(965319);let A=({search:e})=>e&&"string"==typeof(0,S.mB)(e).boardId&&(0,S.mB)(e).boardId||null;function R({boards:e,currentTabIndex:t,hideTabs:r,inLocalNavigation:l,nonFixed:o}){let i=(0,P.WQ)(),{setIsContentHeaderPresent:d}=(0,I.i)(),s=(0,a.TH)(),u=(0,E.Z)(),c=!!u.isAuth&&u.isPartner,f=(0,v.Z)(),h=f?{component:8,element:11674}:Object.freeze({});return((0,w.Z)(h),(0,n.useEffect)(()=>(d(!0),function(){d(!1)}),[]),c&&s||l)?(0,b.jsx)(k,{boards:e,currentTabId:function(){let{pathname:e,search:t}=s;if(c){if("/following/"===e)return"following";else if(e.includes((0,C.tG)()))return"today";else if("/homefeed/"===e&&""===t)return"homefeed"}return A(s)}(),currentTabIndex:t,headerShadowContext:i,hideTabs:r,inLocalNavigation:l,isPartner:c,isTodayTabEnabled:f,nonFixed:o}):null}},363402:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(667294),a=r(19963),l=r(718369);let o=e=>{let t=(0,n.useRef)(!1),{logContextEvent:r}=(0,a.v)(),{viewType:o,viewParameter:i}=(0,l.SU)();(0,n.useEffect)(()=>{Object.entries(e).length>0&&!t.current&&o&&(r({event_type:13,view_type:o,view_parameter:i,...e}),t.current=!0)})}},817349:(e,t,r)=>{r.d(t,{Z:()=>n});let n={en:["US","GB","CA","IN","AU","ID"],es:["MX","PE","AR","CL","CO","ES","VE","UY","PY","EC","BO","CR","DO","SV","GT","HN","NI","PR","PA"],pt:["BR"],de:["DE","AT","CH"],fr:["FR"],id:["ID"],ja:["JP"],it:["IT"],sv:["SE"]}},725e3:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(174646),a=r(817349),l=r(882368);function o(){let e=(0,n.B)(),t=(0,l.Z)(),r=t.isAuth?t.country:e.country;if(void 0===e||void 0===e.locale)return!1;let o=e.locale.substring(0,2);return!!a.Z[o]?.includes(r)}},241544:(e,t,r)=>{r.d(t,{_:()=>a});var n=r(967312);function a(){let{checkExperiment:e}=(0,n.F)(),t=e("entrypoints_today_page_prefetch");switch(t.group){case"prefetch_all":return{preloadExtent:"Both"};case"prefetch_only_js":return{preloadExtent:"OnlyJS"};case"control":return{preloadExtent:"None"};default:{let{anyEnabled:e}=t;return{preloadExtent:e?"Both":"None"}}}}},965319:(e,t,r)=>{function n(e,t){return t?`${e}?${new URLSearchParams(t).toString()}`:e}function a(e){return n("/admin/",e)}function l(e){return n("/admin/oauth/logout/",e)}function o(e){return n("/today/",e)}r.d(t,{HF:()=>a,Kn:()=>l,tG:()=>o})},635943:(e,t,r)=>{r.d(t,{$:()=>_,G:()=>b});var n=r(667294),a=r(422578),l=r(616550),o=r(967312),i=r(174646);function d(e){let t={result:{kind:"Pending",promise:e},read:()=>(function(e){let{result:t}=e;switch(t.kind){case"Pending":throw t.promise;case"Ok":return t.value;case"Err":throw t.error;default:throw Error("Unexpected case")}})(t)};return e.then(e=>{t.result={kind:"Ok",value:e}}).catch(e=>{t.result={kind:"Err",error:e}}),t}let s={"/ideas":{loader:()=>Promise.all([r.e(97270),r.e(38545)]).then(r.bind(r,38523)).then(e=>e.default),rootComponent:()=>Promise.all([r.e(97270),r.e(83119),r.e(8073)]).then(r.bind(r,484883)).then(e=>e.default)},"/pin/:id/analytics":{loader:()=>r.e(66724).then(r.bind(r,601511)).then(e=>e.default),rootComponent:()=>Promise.all([r.e(97270),r.e(83119),r.e(30381),r.e(82261),r.e(99263)]).then(r.bind(r,600148)).then(e=>e.default)},"/today/":{loader:()=>r.e(17587).then(r.bind(r,376881)).then(e=>e.default),rootComponent:()=>Promise.all([r.e(97270),r.e(83119),r.e(3849),r.e(83901)]).then(r.bind(r,164390)).then(e=>e.default)}};var u=r(992114),c=r(785893);let f=(0,n.createContext)(null),h=/(^\/)|:|(\/$)/g,p=/\//g,_=({children:e})=>{let t=(0,a.useRelayEnvironment)(),{checkExperiment:r}=(0,o.F)(),d=(0,i.B)(),s=(0,n.useRef)({}),_=(0,n.useCallback)(e=>{let{rootComponent:n,loadedValueState:a}=x(m(s.current,e),e,"Both",t,r,d);return"NotYetRendered"===a.performanceLoggingState.kind&&(a.performanceLoggingState={kind:"InitiallyRendered",initialRenderTime:Date.now()}),{rootComponent:n,onEntrypointDataLoaded:t=>{if("InitiallyRendered"===a.performanceLoggingState.kind){let r=Date.now();(0,u.LY)("entrypointRouter.routeTiming."+e.kind.replace(h,"").replace(p,"_"),r-a.performanceLoggingState.initialRenderTime,{sampleRate:.1,tags:t??{}}),a.performanceLoggingState={kind:"Complete"}}},loadedValue:a.loadedValue}},[r,t,d]),b=(0,l.k6)(),g=(0,n.useCallback)(e=>{x(m(s.current,e),e,"Both",t,r,d);let n=(0,l.Gn)(e.kind,e.routeParams);b.push(n)},[b,r,t,d]),y=(0,n.useCallback)((e,n)=>{let a=m(s.current,e);"Both"===n&&x(a,e,n,t,r,d)},[r,t,d]),k=(0,n.useMemo)(()=>({loadAndReadDuringRender__INTERNAL:_,preload:y,imperativelyNavigate:g}),[_,g,y]);return(0,c.jsx)(f.Provider,{value:k,children:e})};function b(){let e=(0,n.useContext)(f);if(null==e)throw Error("Missing entrypoint context");return e}function m(e,t){let r=s[t.kind];if(null==r)throw Error("Unexpected missing route! Did you define it in routeMap.ts?");return e[t.kind]??={rootComponent:d(r.rootComponent()),loadedValueStates:{},loader:d(r.loader())}}function x(e,t,r,n,a,l){var o,i,s;let c=JSON.stringify(function e(t){if(!t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(e);let r=Object.keys(t).sort(),n={};for(let a=0;a<r.length;a++)n[r[a]]=e(t[r[a]]);return n}(t.routeParams)),{loadedValueStates:f,rootComponent:h,loader:p}=e;return{rootComponent:h,loadedValueState:f[c]??=(o=f,i=c,s=t.kind,setTimeout(()=>{let e=o[i];null!=e&&(0,u.nP)("entrypointRouter.entrypointUse",{sampleRate:.1,tags:{routeName:s,usedInTime:"NotYetRendered"!==e.performanceLoggingState.kind}})},3e4),{loadedValue:function(e,t){var r,n;let{result:a}=e;switch(a.kind){case"Pending":return d(a.promise.then(t));case"Ok":return{result:{kind:"Ok",value:r=t(a.value)},read:()=>r};case"Err":return{result:{kind:"Err",error:n=a.error},read:()=>{throw n}};default:throw Error("Unexpected case")}}(p,e=>e({routeParams:t.routeParams,relayEnvironment:n,checkExperiment:a,requestContext:l})),performanceLoggingState:{kind:"NotYetRendered"}})}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/MoreIdeasTabsNavCommon-ce72ba6b381a403f.mjs.map